#
# @lc app=leetcode.cn id=1109 lang=python3
# @lcpr version=30203
#
# [1109] èˆªç­é¢„è®¢ç»Ÿè®¡
#

# @lc code=start
"""
å·®åˆ†æ³•ï¼Œå‰ç¼€å’Œçš„é€†è¿ç®—

ç°åœ¨æœ‰ä¸ªæ“ä½œï¼šåœ¨åŒºé—´ [2,4] æ¯ä¸ªä½ç½® +10ã€‚
    æ‰§è¡Œæ“ä½œ [l=2, r=4, val=10]ï¼š

    diff[2] += 10     â†’ [0, 0,10, 0, 0, 0]
    diff[5] -= 10     â†’ [0, 0,10, 0, 0,-10]

    ğŸ”„ è¿˜åŸåŸæ•°ç»„ï¼ˆå‰ç¼€å’Œï¼‰
    cur = 0
    i=1 â†’ cur=0+diff[1]=0   â†’ res[1]=0
    i=2 â†’ cur=0+diff[2]=10  â†’ res[2]=10
    i=3 â†’ cur=10+diff[3]=10 â†’ res[3]=10
    i=4 â†’ cur=10+diff[4]=10 â†’ res[4]=10
    i=5 â†’ cur=10+diff[5]=0  â†’ res[5]=0

    

å·®åˆ†æ•°ç»„ï¼ˆdifference arrayï¼‰å’Œå‰ç¼€å’Œï¼ˆprefix sumï¼‰æœ¬è´¨ä¸Šå°±æ˜¯ä¸€å¯¹é€†è¿ç®—ï¼š
ğŸ”„ å…³ç³»
å‰ç¼€å’Œï¼š
    å·²çŸ¥åŸæ•°ç»„ numsï¼Œæ„é€ å‰ç¼€å’Œæ•°ç»„ preï¼š
    pre[i] = nums[0] + nums[1] + ... + nums[i]
    ğŸ‘‰ ä½œç”¨ï¼šå¿«é€Ÿç®—åŒºé—´å’Œã€‚

å·®åˆ†æ•°ç»„ï¼š
    å·²çŸ¥åŸæ•°ç»„ numsï¼Œæ„é€ å·®åˆ†æ•°ç»„ diffï¼š
    diff[i] = nums[i] - nums[i-1]   (i>=1)
    diff[0] = nums[0]
    ğŸ‘‰ ä½œç”¨ï¼šå¿«é€ŸåšåŒºé—´ä¿®æ”¹ã€‚
    
ğŸ“ å®ƒä»¬äº’ä¸ºé€†è¿ç®—
    ä» åŸæ•°ç»„ â†’ å·®åˆ†æ•°ç»„ï¼šåšä¸€æ¬¡å‡æ³•ã€‚
    ä» å·®åˆ†æ•°ç»„ â†’ åŸæ•°ç»„ï¼šåšä¸€æ¬¡å‰ç¼€å’Œã€‚

ğŸ’¡ åº”ç”¨åœºæ™¯
    å‰ç¼€å’Œï¼šå¾ˆå¤šåŒºé—´æŸ¥è¯¢é¢˜ï¼ˆåŒºé—´å’Œã€åŒºé—´æœ€å¤§å€¼â€¦ï¼‰
    å·®åˆ†æ•°ç»„ï¼šå¾ˆå¤šåŒºé—´ä¿®æ”¹é¢˜ï¼ˆåŒºé—´åŠ ã€åŒºé—´èµ‹å€¼â€¦ï¼‰

ç”¨é€”ï¼š
    å·®åˆ†æ•°ç»„è¿™ä¸ªé€‚åˆåšå¤šæ¬¡æ“ä½œï¼Œç„¶åæœ€åç»Ÿä¸€æ‰«ä¸€éå‰ç¼€å’Œï¼Œå®Œæˆæ‰€æœ‰æ“ä½œçš„ç´¯åŠ 

å±€é™æ€§ï¼š
    åŒºé—´è¿ç»­ä¿®æ”¹ï¼Œå¤šæ¬¡æ“ä½œï¼šæ¯”å¦‚èˆªç­é¢„è®¢ã€åŒºé—´åŠ  kã€æ‰¹é‡æ›´æ–°ã€‚
    æœ€ç»ˆä¸€æ¬¡æ€§è¾“å‡ºï¼šæ¯”å¦‚ã€Œæ‰€æœ‰æ“ä½œå®Œæˆåè¾“å‡ºç»“æœã€ã€‚

âŒ ä»€ä¹ˆæ—¶å€™å·®åˆ†æ•°ç»„ä¸åˆé€‚
    åªæœ‰ä¸€æ¬¡æˆ–å¾ˆå°‘å‡ æ¬¡æ“ä½œ
    æ“ä½œçš„ä¸‹æ ‡æ˜¯é›¶æ•£çš„ï¼ˆä¸è¿ç»­ï¼‰
    éœ€è¦ä¸­é€”å¤šæ¬¡æŸ¥è¯¢
    

å¯¹æ¯”ï¼š
    ä¸ç”¨å·®åˆ†ï¼Œé‡åˆ°ä¸€ä¸ªæ“ä½œ [l,r,val]ï¼Œæˆ‘ä»¬å°±å¿…é¡»ï¼š
        for i in range(l, r+1):
            res[i] += val
    è¿™ä¸ªæ“ä½œå¤æ‚åº¦æ˜¯ O(r-l+1)ã€‚
    å¦‚æœæœ‰ m ä¸ªæ“ä½œï¼Œæœ€åæƒ…å†µä¸‹æ¯ä¸ªæ“ä½œéƒ½è¦†ç›–æ•´ä¸ªæ•°ç»„é•¿åº¦ nï¼Œ
    æ€»å¤æ‚åº¦å°±æ˜¯ O(mÂ·n)ã€‚

    ä½¿ç”¨å·®åˆ†æ³•ï¼š
        diff[l] += val
        diff[r+1] -= val
    æ‰€ä»¥æ˜¯ O(1)ã€‚
    æ‰€æœ‰ m ä¸ªæ“ä½œå®Œæˆåï¼Œå†æ‰«ä¸€éé•¿åº¦ä¸º n çš„æ•°ç»„åšå‰ç¼€å’Œï¼Œè¿˜åŸç»“æœï¼š O(n)ã€‚
    æ€»å¤æ‚åº¦å°±æ˜¯ O(m + n)ã€‚



"""
class Solution:
    def corpFlightBookings(self, bookings: List[List[int]], n: int) -> List[int]:
        diff = [0] * (n + 2)  # å¤šå¼€ä¸€ä½ï¼Œå¤„ç† r+1 ä¸‹æ ‡
        
        for first, last, seats in bookings:
            diff[first] += seats
            diff[last + 1] -= seats
        
        res = [0] * n
        cur = 0
        for i in range(1, n + 1):
            cur += diff[i]
            res[i - 1] = cur
        return res


    def corpFlightBookings(self, bookings: List[List[int]], n: int) -> List[int]:
        diff = [0] * (n + 2)  # å¤šå¼€ä¸€ä½ï¼Œå¤„ç† r+1 ä¸‹æ ‡
        for start, end, seats in bookings:
            diff[start] += seats
            diff[end+1] -= seats
        print(diff)
        res = [0] * n
        for i in range(1, n+1):
            diff[i] += diff[i-1]
            res[i-1] = diff[i]
        return res
        


# @lc code=end



#
# @lcpr case=start
# [[1,2,10],[2,3,20],[2,5,25]]\n5\n
# @lcpr case=end

# @lcpr case=start
# [[1,2,10],[2,2,15]]\n2\n
# @lcpr case=end

#

